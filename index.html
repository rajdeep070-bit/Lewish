<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lewish Classes - Student App</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --primary: #4a4a4a;
            --primary-dark: #333333;
            --secondary: #5a5a5a;
            --accent: #666666;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --border-color: #e2e8f0;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --primary-gradient: linear-gradient(135deg, #4a4a4a, #333333);
            --secondary-gradient: linear-gradient(135deg, #5a5a5a, #666666);
            --dark-gradient: linear-gradient(135deg, #1e293b, #334155);
            --card-shadow: 0 10px 25px rgba(0,0,0,0.08);
            --hover-shadow: 0 15px 35px rgba(0,0,0,0.12);
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa, #e9ecef);
            color: var(--dark);
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 40px rgba(0,0,0,0.1);
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 1s ease-in;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--dark);
            text-align: center;
            animation: bounce 2s infinite;
            line-height: 1.2;
            margin-bottom: 20px;
        }

        .logo-icon {
            font-size: 4rem;
            color: var(--dark);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        /* Common Styles */
        .screen {
            display: none;
            padding: 20px;
            animation: slideIn 0.4s ease-out;
        }

        .active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin: 15px 0;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(74, 74, 74, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(74, 74, 74, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--light);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(74, 74, 74, 0.1);
        }
        
        /* Icon Style */
        .material-icons {
            color: var(--primary);
        }
        
        .btn .material-icons {
            color: white;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
        }

        .menu-icon {
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-icon:hover {
            color: var(--primary-dark);
            transform: scale(1.1);
        }

        .welcome-text {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
            text-align: right;
        }

        /* Side Menu */
        .side-menu {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100%;
            background: white;
            box-shadow: 5px 0 20px rgba(0,0,0,0.1);
            z-index: 200;
            transition: left 0.3s ease;
            padding: 20px;
        }

        .side-menu.active {
            left: 0;
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 199;
            display: none;
        }

        .menu-overlay.active {
            display: block;
        }

        .menu-item {
            padding: 15px;
            margin: 8px 0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--dark);
            font-weight: 500;
        }

        .menu-item:hover {
            background: var(--light);
            transform: translateX(5px);
        }

        /* Dashboard */
        .subject-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 25px;
        }

        .subject-card {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 25px;
            color: var(--dark);
            background: white;
            border: 1px solid var(--border-color);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            padding: 15px;
            box-shadow: var(--card-shadow);
        }

        .subject-card:hover {
            transform: scale(1.05);
            box-shadow: var(--hover-shadow);
            background: var(--primary-gradient);
            color: white;
        }

        .subject-card:hover .material-icons {
            color: white;
        }

        .subject-icon {
            font-size: 2.8rem !important;
            margin-bottom: 15px;
        }

        /* Chapter Screen */
        .chapter-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }

        .chapter-card {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            border-radius: 20px;
            background: white;
            border: 1px solid var(--border-color);
            font-weight: 500;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--card-shadow);
        }

        .chapter-card:hover {
            transform: translateX(8px);
            box-shadow: var(--hover-shadow);
            background: var(--primary-gradient);
            color: white;
        }

        .chapter-card:hover .material-icons {
            color: white;
        }

        .chapter-icon {
            font-size: 2rem;
        }

        /* Language Selection */
        .language-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 40px;
        }

        .language-btn {
            padding: 25px;
            font-size: 1.3rem;
            font-weight: 600;
            border-radius: 20px;
            background: white;
            border: 1px solid var(--border-color);
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: var(--card-shadow);
        }

        .language-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            background: var(--primary-gradient);
            color: white;
        }

        /* Quiz Screen */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 15px 0;
            border-bottom: 2px solid var(--light);
        }

        .question-counter, .marks {
            font-weight: 600;
            color: var(--dark);
            background: var(--light);
            padding: 8px 15px;
            border-radius: 12px;
        }
        
        .timer {
            font-weight: 600;
            color: var(--dark);
            background: var(--light);
            padding: 8px 15px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer.warning {
            color: white;
            background: var(--error);
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 30px;
            line-height: 1.6;
            text-align: center;
            font-weight: 500;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-btn {
            padding: 18px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1rem;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .option-btn:hover {
            border-color: var(--primary);
            background: var(--light);
            transform: translateX(5px);
        }

        .option-btn.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .option-btn.wrong {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }

        /* Result Screen */
        .result-card {
            text-align: center;
            padding: 40px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 25px;
            margin: 20px 0;
            box-shadow: var(--hover-shadow);
        }

        .score-circle {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0 auto 25px;
            border: 4px solid white;
        }

        .total-score {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .score-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        .stat-item {
            background: white;
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            box-shadow: var(--card-shadow);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        /* Class Selection Screen */
        .class-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 40px;
        }

        .class-card {
            padding: 30px;
            border-radius: 20px;
            background: white;
            border: 1px solid var(--border-color);
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: var(--card-shadow);
            font-size: 1.5rem;
            font-weight: 600;
        }

        .class-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            background: var(--primary-gradient);
            color: white;
        }

        .class-card:hover .material-icons {
            color: white;
        }

        .class-icon {
            font-size: 2.5rem;
        }

        /* App Language Selection Screen */
        .app-language-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 40px;
        }

        .app-language-card {
            padding: 30px;
            border-radius: 20px;
            background: white;
            border: 1px solid var(--border-color);
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: var(--card-shadow);
            font-size: 1.5rem;
            font-weight: 600;
        }

        .app-language-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            background: var(--primary-gradient);
            color: white;
        }

        .app-language-card:hover .material-icons {
            color: white;
        }

        .app-language-icon {
            font-size: 2.5rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-8px); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .container {
                max-width: 100%;
                box-shadow: none;
            }
        }
        
        /* Additional Responsive Adjustments */
        @media (max-width: 360px) {
            .screen {
                padding: 15px;
            }

            .card {
                padding: 20px;
            }

            .subject-card div {
                font-size: 1rem;
            }

            .question-text {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Splash Screen -->
        <div class="splash-screen" id="splashScreen">
            <span class="material-icons logo-icon">school</span>
            <div class="logo" id="splashLogo">Lewish<br>Classes</div>
        </div>

        <!-- Setup Screen -->
        <div class="screen active" id="setupScreen">
            <div class="card" style="text-align: center; margin-top: 50px;">
                <div style="font-size: 3.5rem; margin-bottom: 25px;">
                    <span class="material-icons" style="font-size: 3.5rem;">school</span>
                </div>
                <h2 style="margin-bottom: 15px; color: var(--dark); font-size: 1.8rem;" id="welcomeTitle">Welcome to Lewish Classes!</h2>
                <p style="margin-bottom: 35px; color: var(--gray); font-size: 1.1rem;" id="welcomeSubtitle">Let's get you started with your learning journey</p>
                
                <div class="input-group">
                    <input type="text" class="input-field" id="userName" placeholder="Enter your name">
                </div>
                
                <button class="btn" onclick="saveUserName()" style="width: 100%;">
                    <span class="material-icons">save</span>
                    <span id="saveContinueBtn">Save & Continue</span>
                </button>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div class="screen" id="dashboardScreen">
            <div class="header">
                <span class="material-icons menu-icon" onclick="toggleMenu()">menu</span>
                <div class="welcome-text" id="welcomeText"></div>
            </div>

            <div class="card" style="margin: 25px 0;">
                <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.5rem;" id="startTestTitle">Start a Test</h3>
                <p style="color: var(--gray); font-size: 1.1rem;" id="startTestSubtitle">Choose a subject to begin your learning journey.</p>
            </div>

            <div class="subject-grid" id="subjectGrid">
                <!-- Subjects will be populated here by JavaScript -->
            </div>
        </div>
        
        <!-- Chapter Selection Screen -->
        <div class="screen" id="chapterScreen">
            <div class="header">
                <span class="material-icons" onclick="showScreen('dashboardScreen')">arrow_back</span>
                <div class="header-title" id="chapterSubjectTitle"></div>
                <div></div> <!-- Empty div for spacing -->
            </div>

            <div class="card" style="text-align: center;">
                <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.5rem;" id="chooseChapterTitle">Choose a Chapter</h3>
                <p style="color: var(--gray); font-size: 1.1rem;" id="chooseChapterSubtitle">Select a chapter to begin the test</p>
            </div>

            <div class="chapter-grid" id="chapterGrid">
                <!-- Chapters will be populated here -->
            </div>
        </div>

        <!-- Language Selection Screen -->
        <div class="screen" id="languageScreen">
            <div class="header">
                <span class="material-icons" onclick="showScreen('chapterScreen')">arrow_back</span>
                <div></div> <!-- Empty div for spacing -->
            </div>

            <div class="card" style="text-align: center;">
                <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.5rem;" id="chooseLanguageTitle">Choose Language</h3>
                <p style="color: var(--gray); font-size: 1.1rem;" id="chooseLanguageSubtitle">Select your preferred language for the test</p>
            </div>

            <div class="language-buttons">
                <button class="language-btn" onclick="selectLanguage('Hindi')">
                    <span class="material-icons">translate</span>
                    <span id="hindiBtn">Hindi</span>
                </button>
                <button class="language-btn" onclick="selectLanguage('English')">
                    <span class="material-icons">language</span>
                    <span id="englishBtn">English</span>
                </button>
                <button class="language-btn" onclick="selectLanguage('Urdu')">
                    <span class="material-icons">translate</span>
                    <span id="urduBtn">Urdu</span>
                </button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div class="screen" id="quizScreen">
            <div class="quiz-header">
                <div class="question-counter" id="questionCounter">1/10</div>
                <div class="timer" id="timerContainer">
                    <span class="material-icons" style="font-size: 1.3rem;">timer</span>
                    <span id="timer">30</span>
                </div>
                <div class="marks" id="marks">1 Mark</div>
            </div>

            <div class="card">
                <div class="question-text" id="questionText">Loading question...</div>
                
                <div class="options-container" id="optionsContainer">
                    <!-- Options will be populated here -->
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div class="screen" id="resultScreen">
             <div class="header">
                 <!-- Empty Header -->
            </div>

            <div class="result-card">
                <div class="score-circle">
                    <div class="total-score" id="totalScore">0</div>
                    <div class="score-label" id="scoreLabel">Score</div>
                </div>
                <h3 style="margin-bottom: 15px; font-size: 1.8rem;" id="testCompletedTitle">Test Completed!</h3>
                <p style="font-size: 1.1rem;" id="testCompletedSubtitle">Great job completing the test!</p>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">
                        <span class="material-icons" style="color: var(--success);">check_circle</span>
                        <span id="correctLabel">Correct</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="wrongAnswers">0</div>
                    <div class="stat-label">
                        <span class="material-icons" style="color: var(--error);">cancel</span>
                        <span id="wrongLabel">Wrong</span>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: 15px; margin-top: 25px;">
                <button class="btn" onclick="retakeTest()" style="flex: 1;">
                    <span class="material-icons">refresh</span>
                    <span id="retakeTestBtn">Retake Test</span>
                </button>
                <button class="btn btn-outline" onclick="goToDashboard()" style="flex: 1;">
                    <span class="material-icons">home</span>
                    <span id="dashboardBtn">Dashboard</span>
                </button>
            </div>
        </div>

        <!-- Class Selection Screen -->
        <div class="screen" id="classSelectionScreen">
            <div class="header">
                <span class="material-icons" onclick="toggleMenu()">arrow_back</span>
                <div class="header-title" id="chooseClassTitle">Choose Your Class</div>
                <div></div> <!-- Empty div for spacing -->
            </div>

            <div class="card" style="text-align: center;">
                <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.5rem;" id="selectClassTitle">Select Your Class</h3>
                <p style="color: var(--gray); font-size: 1.1rem;" id="selectClassSubtitle">Choose your class to continue</p>
            </div>

            <div class="class-selection">
                <div class="class-card" onclick="selectClass('10')">
                    <span class="material-icons class-icon">school</span>
                    <span id="class10Btn">10th Class</span>
                </div>
                <div class="class-card" onclick="selectClass('12')">
                    <span class="material-icons class-icon">school</span>
                    <span id="class12Btn">12th Class</span>
                </div>
            </div>
        </div>

        <!-- App Language Selection Screen -->
        <div class="screen" id="appLanguageSelectionScreen">
            <div class="header">
                <span class="material-icons" onclick="toggleMenu()">arrow_back</span>
                <div class="header-title" id="appLanguageTitle">App Language</div>
                <div></div> <!-- Empty div for spacing -->
            </div>

            <div class="card" style="text-align: center;">
                <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.5rem;" id="selectAppLanguageTitle">Select App Language</h3>
                <p style="color: var(--gray); font-size: 1.1rem;" id="selectAppLanguageSubtitle">Choose your preferred language for the app</p>
            </div>

            <div class="app-language-selection">
                <div class="app-language-card" onclick="changeAppLanguage('en')">
                    <span class="material-icons app-language-icon">language</span>
                    <span id="appEnglishBtn">English</span>
                </div>
                <div class="app-language-card" onclick="changeAppLanguage('hi')">
                    <span class="material-icons app-language-icon">translate</span>
                    <span id="appHindiBtn">हिंदी</span>
                </div>
                <div class="app-language-card" onclick="changeAppLanguage('ur')">
                    <span class="material-icons app-language-icon">translate</span>
                    <span id="appUrduBtn">اردو</span>
                </div>
            </div>
        </div>

        <!-- Side Menu -->
        <div class="side-menu" id="sideMenu">
             <div style="padding: 25px 0; text-align: center; border-bottom: 1px solid var(--border-color); margin-bottom: 25px;">
                <div style="font-size: 1.3rem; font-weight: 700; color: var(--dark);" id="menuUserName"></div>
            </div>
            
            <div class="menu-item" onclick="changeUsername()">
                <span class="material-icons">person</span>
                <span id="changeUsernameMenu">Change Username</span>
            </div>
            <div class="menu-item" onclick="showClassSelection()">
                <span class="material-icons">school</span>
                <span id="chooseClassMenu">Choose Class</span>
            </div>
            <div class="menu-item" onclick="showAppLanguageSelection()">
                <span class="material-icons">language</span>
                <span id="languageSettingsMenu">Language Settings</span>
            </div>
            <div class="menu-item" onclick="shareApp()">
                <span class="material-icons">share</span>
                <span id="shareAppMenu">Share App</span>
            </div>
            <div class="menu-item" onclick="aboutApp()">
                <span class="material-icons">info</span>
                <span id="aboutAppMenu">About App</span>
            </div>
            <div class="menu-item" onclick="logout()" style="margin-top: 25px;">
                <span class="material-icons" style="color: var(--error);">logout</span>
                <span style="color: var(--error);" id="logoutMenu">Logout</span>
            </div>
        </div>

        <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAjPRGPaK5NIAe3xW2loGp8THfiY6NgKGc",
            authDomain: "lewishza-13c51.firebaseapp.com",
            databaseURL: "https://lewishza-13c51-default-rtdb.firebaseio.com",
            projectId: "lewishza-13c51",
            storageBucket: "lewishza-13c51.firebasestorage.app",
            messagingSenderId: "920694282989",
            appId: "1:920694282989:web:8a4ba07e7d8ce792d40ae4",
            measurementId: "G-05P5TMWZGW"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Language translations
        const translations = {
            en: {
                splashLogo: "Lewish<br>Classes",
                welcomeTitle: "Welcome to Lewish Classes!",
                welcomeSubtitle: "Let's get you started with your learning journey",
                saveContinueBtn: "Save & Continue",
                startTestTitle: "Start a Test",
                startTestSubtitle: "Choose a subject to begin your learning journey.",
                chooseChapterTitle: "Choose a Chapter",
                chooseChapterSubtitle: "Select a chapter to begin the test",
                chooseLanguageTitle: "Choose Language",
                chooseLanguageSubtitle: "Select your preferred language for the test",
                hindiBtn: "Hindi",
                englishBtn: "English",
                urduBtn: "Urdu",
                marks: "1 Mark",
                scoreLabel: "Score",
                testCompletedTitle: "Test Completed!",
                testCompletedSubtitle: "Great job completing the test!",
                correctLabel: "Correct",
                wrongLabel: "Wrong",
                retakeTestBtn: "Retake Test",
                dashboardBtn: "Dashboard",
                chooseClassTitle: "Choose Your Class",
                selectClassTitle: "Select Your Class",
                selectClassSubtitle: "Choose your class to continue",
                class10Btn: "10th Class",
                class12Btn: "12th Class",
                appLanguageTitle: "App Language",
                selectAppLanguageTitle: "Select App Language",
                selectAppLanguageSubtitle: "Choose your preferred language for the app",
                appEnglishBtn: "English",
                appHindiBtn: "हिंदी",
                appUrduBtn: "اردو",
                changeUsernameMenu: "Change Username",
                chooseClassMenu: "Choose Class",
                languageSettingsMenu: "Language Settings",
                shareAppMenu: "Share App",
                aboutAppMenu: "About App",
                logoutMenu: "Logout",
                subjects: {
                    Hindi: "Hindi",
                    English: "English",
                    Mathematics: "Mathematics",
                    Science: "Science",
                    "Social Science": "Social Science",
                    History: "History",
                    "Political Science": "Political Science",
                    Geography: "Geography",
                    Economics: "Economics",
                    Sociology: "Sociology",
                    Psychology: "Psychology"
                },
                hi: "Hi",
                enterName: "Enter your name",
                pleaseEnterName: "Please enter your name",
                loadingChapters: "Loading chapters...",
                noChaptersFound: "No chapters found for Class {class} in this subject.",
                errorLoadingChapters: "Error loading chapters.",
                loadingQuestions: "Loading question...",
                noQuestionsAvailable: "No questions available for this combination.",
                errorLoadingQuestions: "Error loading questions. Please try again.",
                classChanged: "Class successfully changed to {class}th. Subjects have been updated.",
                alreadyInClass: "You are already in Class {class}th.",
                pleaseEnterClass: "Please enter either 10 or 12",
                aboutAppText: "Lewish Classes - Bilingual Test App\nVersion 1.0\nFor Class 10th & 12th Students",
                confirmLogout: "Are you sure you want to logout?",
                enterNewUsername: "Enter new username:",
                languageSettingsFuture: "Language settings will be implemented in future version",
                shareAppText: "Check out Lewish Classes - A great learning app for students!",
                shareError: "Your browser doesn't support sharing. Please copy the link manually."
            },
            hi: {
                splashLogo: "लेविश<br>क्लासेज",
                welcomeTitle: "लेविश क्लासेज में आपका स्वागत है!",
                welcomeSubtitle: "आइए आपको अपनी शिक्षा यात्रा शुरू करने में मदद करते हैं",
                saveContinueBtn: "सेव करें और जारी रखें",
                startTestTitle: "एक टेस्ट शुरू करें",
                startTestSubtitle: "अपनी शिक्षा यात्रा शुरू करने के लिए एक विषय चुनें।",
                chooseChapterTitle: "एक अध्याय चुनें",
                chooseChapterSubtitle: "टेस्ट शुरू करने के लिए एक अध्याय चुनें",
                chooseLanguageTitle: "भाषा चुनें",
                chooseLanguageSubtitle: "टेस्ट के लिए अपनी पसंदीदा भाषा चुनें",
                hindiBtn: "हिंदी",
                englishBtn: "अंग्रेज़ी",
                urduBtn: "उर्दू",
                marks: "1 अंक",
                scoreLabel: "स्कोर",
                testCompletedTitle: "टेस्ट पूर्ण हुआ!",
                testCompletedSubtitle: "टेस्ट पूरा करने के लिए बहुत बढ़िया!",
                correctLabel: "सही",
                wrongLabel: "गलत",
                retakeTestBtn: "टेस्ट फिर से दें",
                dashboardBtn: "डैशबोर्ड",
                chooseClassTitle: "अपनी कक्षा चुनें",
                selectClassTitle: "अपनी कक्षा चुनें",
                selectClassSubtitle: "जारी रखने के लिए अपनी कक्षा चुनें",
                class10Btn: "10वीं कक्षा",
                class12Btn: "12वीं कक्षा",
                appLanguageTitle: "ऐप भाषा",
                selectAppLanguageTitle: "ऐप भाषा चुनें",
                selectAppLanguageSubtitle: "ऐप के लिए अपनी पसंदीदा भाषा चुनें",
                appEnglishBtn: "English",
                appHindiBtn: "हिंदी",
                appUrduBtn: "اردو",
                changeUsernameMenu: "उपयोगकर्ता नाम बदलें",
                chooseClassMenu: "कक्षा चुनें",
                languageSettingsMenu: "भाषा सेटिंग्स",
                shareAppMenu: "ऐप शेयर करें",
                aboutAppMenu: "ऐप के बारे में",
                logoutMenu: "लॉगआउट",
                subjects: {
                    Hindi: "हिंदी",
                    English: "अंग्रेज़ी",
                    Mathematics: "गणित",
                    Science: "विज्ञान",
                    "Social Science": "सामाजिक विज्ञान",
                    History: "इतिहास",
                    "Political Science": "राजनीति विज्ञान",
                    Geography: "भूगोल",
                    Economics: "अर्थशास्त्र",
                    Sociology: "समाजशास्त्र",
                    Psychology: "मनोविज्ञान"
                },
                hi: "नमस्ते",
                enterName: "अपना नाम दर्ज करें",
                pleaseEnterName: "कृपया अपना नाम दर्ज करें",
                loadingChapters: "अध्याय लोड हो रहे हैं...",
                noChaptersFound: "इस विषय में कक्षा {class} के लिए कोई अध्याय नहीं मिला।",
                errorLoadingChapters: "अध्याय लोड करने में त्रुटि।",
                loadingQuestions: "प्रश्न लोड हो रहा है...",
                noQuestionsAvailable: "इस संयोजन के लिए कोई प्रश्न उपलब्ध नहीं है।",
                errorLoadingQuestions: "प्रश्न लोड करने में त्रुटि। कृपया फिर से कोशिश करें।",
                classChanged: "कक्षा सफलतापूर्वक {class}वीं में बदल दी गई। विषय अपडेट कर दिए गए हैं।",
                alreadyInClass: "आप पहले से ही कक्षा {class}वीं में हैं।",
                pleaseEnterClass: "कृपया 10 या 12 दर्ज करें",
                aboutAppText: "लेविश क्लासेज - द्विभाषी टेस्ट ऐप\nसंस्करण 1.0\n10वीं और 12वीं कक्षा के छात्रों के लिए",
                confirmLogout: "क्या आप लॉगआउट करना चाहते हैं?",
                enterNewUsername: "नया उपयोगकर्ता नाम दर्ज करें:",
                languageSettingsFuture: "भाषा सेटिंग्स भविष्य के संस्करण में लागू की जाएंगी",
                shareAppText: "लेविश क्लासेज देखें - छात्रों के लिए एक शानदार लर्निंग ऐप!",
                shareError: "आपका ब्राउज़र शेयरिंग का समर्थन नहीं करता। कृपया लिंक को मैन्युअल रूप से कॉपी करें।"
            },
            ur: {
                splashLogo: "لیویش<br>کلاسز",
                welcomeTitle: "لیویش کلاسز میں خوش آمدید!",
                welcomeSubtitle: "آئیے آپ کو اپنی سیکھنے کے سفر شروع کرنے میں مدد کریں",
                saveContinueBtn: "محفوظ کریں اور جاری رکھیں",
                startTestTitle: "ٹیسٹ شروع کریں",
                startTestSubtitle: "اپنی سیکھنے کے سفر شروع کرنے کے لیے ایک موضوع چنیں۔",
                chooseChapterTitle: "ایک باب چنیں",
                chooseChapterSubtitle: "ٹیسٹ شروع کرنے کے لیے ایک باب چنیں",
                chooseLanguageTitle: "زبان چنیں",
                chooseLanguageSubtitle: "ٹیسٹ کے لیے اپنی پسندیدہ زبان چنیں",
                hindiBtn: "ہندی",
                englishBtn: "انگریزی",
                urduBtn: "اردو",
                marks: "1 نمبر",
                scoreLabel: "اسکور",
                testCompletedTitle: "ٹیسٹ مکمل ہوگیا!",
                testCompletedSubtitle: "ٹیسٹ مکمل کرنے کے لیے بہت بہترین!",
                correctLabel: "درست",
                wrongLabel: "غلط",
                retakeTestBtn: "ٹیسٹ دوبارہ دیں",
                dashboardBtn: "ڈیش بورڈ",
                chooseClassTitle: "اپنی کلاس چنیں",
                selectClassTitle: "اپنی کلاس چنیں",
                selectClassSubtitle: "جاری رکھنے کے لیے اپنی کلاس چنیں",
                class10Btn: "10ویں کلاس",
                class12Btn: "12ویں کلاس",
                appLanguageTitle: "ایپ زبان",
                selectAppLanguageTitle: "ایپ زبان چنیں",
                selectAppLanguageSubtitle: "ایپ کے لیے اپنی پسندیدہ زبان چنیں",
                appEnglishBtn: "English",
                appHindiBtn: "हिंदी",
                appUrduBtn: "اردو",
                changeUsernameMenu: "صارف نام تبدیل کریں",
                chooseClassMenu: "کلاس چنیں",
                languageSettingsMenu: "زبان کی ترتیبات",
                shareAppMenu: "ایپ شیئر کریں",
                aboutAppMenu: "ایپ کے بارے میں",
                logoutMenu: "لاگ آؤٹ",
                subjects: {
                    Hindi: "ہندی",
                    English: "انگریزی",
                    Mathematics: "ریاضی",
                    Science: "سائنس",
                    "Social Science": "سماجی سائنس",
                    History: "تاریخ",
                    "Political Science": "سیاسی سائنس",
                    Geography: "جغرافیہ",
                    Economics: "معاشیات",
                    Sociology: "سماجیات",
                    Psychology: "نفسیات"
                },
                hi: "ہیلو",
                enterName: "اپنا نام درج کریں",
                pleaseEnterName: "براہ کرم اپنا نام درج کریں",
                loadingChapters: "باب لوڈ ہو رہے ہیں...",
                noChaptersFound: "اس موضوع میں کلاس {class} کے لیے کوئی باب نہیں ملا۔",
                errorLoadingChapters: "باب لوڈ کرنے میں خرابی۔",
                loadingQuestions: "سوال لوڈ ہو رہا ہے...",
                noQuestionsAvailable: "اس ترکیب کے لیے کوئی سوال دستیاب نہیں ہے۔",
                errorLoadingQuestions: "سوال لوڈ کرنے میں خرابی۔ براہ کرم دوبارہ کوشش کریں۔",
                classChanged: "کلاس کامیابی سے {class}ویں میں تبدیل کر دی گئی۔ موضوع اپ ڈیٹ کر دیے گئے ہیں۔",
                alreadyInClass: "آپ پہلے ہی کلاس {class}ویں میں ہیں۔",
                pleaseEnterClass: "براہ کرم 10 یا 12 درج کریں",
                aboutAppText: "لیویش کلاسز - دو زبانوں میں ٹیسٹ ایپ\nورژن 1.0\n10ویں اور 12ویں کلاس کے طلباء کے لیے",
                confirmLogout: "کیا آپ لاگ آؤٹ کرنا چاہتے ہیں؟",
                enterNewUsername: "نیا صارف نام درج کریں:",
                languageSettingsFuture: "زبان کی ترتیبات مستقبل کے ورژن میں لاگو کی جائیں گی",
                shareAppText: "لیویش کلاسز دیکھیں - طلباء کے لیے ایک بہترین لرننگ ایپ!",
                shareError: "آپ کا براؤزر شیئرنگ کی حمایت نہیں کرتا ہے۔ براہ کرم لنک کو دستیوی طور پر کاپی کریں۔"
            }
        };

        // App State
        let currentUser = {
            name: '',
            class: '10' // Default class
        };
        
        let currentSubject = '';
        let currentChapter = '';
        let currentLanguage = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = {
            correct: 0,
            wrong: 0
        };
        let questionTimer;
        let appLanguage = 'en'; // Default language

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            const savedClass = localStorage.getItem('dac_userClass');
            if (savedClass) {
                currentUser.class = savedClass;
            }
            
            const savedLanguage = localStorage.getItem('dac_appLanguage');
            if (savedLanguage) {
                appLanguage = savedLanguage;
            }
            
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                checkUserData();
                updateAppLanguage();
            }, 3000);
        });

        function checkUserData() {
            const savedName = localStorage.getItem('dac_userName'); 
            if (savedName) {
                currentUser.name = savedName;
                showScreen('dashboardScreen');
                updateWelcomeText();
            } else {
                showScreen('setupScreen');
            }
        }

        function saveUserName() {
            const userName = document.getElementById('userName').value.trim();
            if (userName) {
                currentUser.name = userName;
                localStorage.setItem('dac_userName', userName);
                showScreen('dashboardScreen');
                updateWelcomeText();
            } else {
                alert(translations[appLanguage].pleaseEnterName);
            }
        }

        function updateWelcomeText() {
            document.getElementById('welcomeText').textContent = `${translations[appLanguage].hi}, ${currentUser.name}`;
            document.getElementById('menuUserName').textContent = currentUser.name;
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            
            if (screenId === 'dashboardScreen') {
                displaySubjects();
            }
        }

        function toggleMenu() {
            document.getElementById('sideMenu').classList.toggle('active');
            document.getElementById('menuOverlay').classList.toggle('active');
        }

        function displaySubjects() {
            const subjectGrid = document.getElementById('subjectGrid');
            subjectGrid.innerHTML = ''; 

            const subjects10 = [
                { name: 'Hindi', icon: 'translate' },
                { name: 'English', icon: 'menu_book' },
                { name: 'Mathematics', icon: 'calculate' },
                { name: 'Science', icon: 'science' },
                { name: 'Social Science', icon: 'public' }
            ];
            
            const subjects12 = [
                { name: 'History', icon: 'history_edu' },
                { name: 'Political Science', icon: 'gavel' },
                { name: 'Geography', icon: 'map' },
                { name: 'Economics', icon: 'insights' },
                { name: 'Sociology', icon: 'groups' },
                { name: 'Psychology', icon: 'psychology' },
                { name: 'Hindi', icon: 'translate' },
                { name: 'English', icon: 'menu_book' }
            ];

            const subjectsToShow = currentUser.class === '12' ? subjects12 : subjects10;

            subjectsToShow.forEach(subject => {
                const subjectCard = document.createElement('div');
                subjectCard.className = 'subject-card';
                subjectCard.onclick = () => selectSubject(subject.name);
                subjectCard.innerHTML = `
                    <span class="material-icons subject-icon">${subject.icon}</span>
                    <div>${translations[appLanguage].subjects[subject.name]}</div>
                `;
                subjectGrid.appendChild(subjectCard);
            });
        }

        function selectSubject(subject) {
            currentSubject = subject;
            loadChapters(subject);
            showScreen('chapterScreen');
        }

        function loadChapters(subject) {
            const chapterGrid = document.getElementById('chapterGrid');
            chapterGrid.innerHTML = `<div>${translations[appLanguage].loadingChapters}</div>`;
            document.getElementById('chapterSubjectTitle').textContent = translations[appLanguage].subjects[subject];

            database.ref('chapters').orderByChild('subject').equalTo(subject).once('value')
                .then(snapshot => {
                    chapterGrid.innerHTML = ''; 
                    let chaptersFound = false;

                    if (snapshot.exists()) {
                        snapshot.forEach(childSnapshot => {
                            const chapter = childSnapshot.val();
                            if (chapter.class === currentUser.class) {
                                chaptersFound = true;
                                const chapterCard = document.createElement('div');
                                chapterCard.className = 'chapter-card';
                                chapterCard.innerHTML = `<span class="material-icons chapter-icon">library_books</span><div>${chapter.name}</div>`;
                                chapterCard.onclick = () => selectChapter(chapter.name);
                                chapterGrid.appendChild(chapterCard);
                            }
                        });
                    }

                    if (!chaptersFound) {
                        chapterGrid.innerHTML = `<div>${translations[appLanguage].noChaptersFound.replace('{class}', currentUser.class)}</div>`;
                    }
                })
                .catch(error => {
                    console.error('Error loading chapters:', error);
                    chapterGrid.innerHTML = `<div>${translations[appLanguage].errorLoadingChapters}</div>`;
                });
        }
        
        function selectChapter(chapter) {
            currentChapter = chapter;
            showScreen('languageScreen');
        }

        function selectLanguage(language) {
            currentLanguage = language;
            loadQuestions();
        }

        function loadQuestions() {
            showScreen('quizScreen');
            
            database.ref('questions').once('value')
                .then(snapshot => {
                    const allQuestions = [];
                    snapshot.forEach(childSnapshot => {
                        allQuestions.push(childSnapshot.val());
                    });
                    
                    const filteredQuestions = allQuestions.filter(q => 
                        q.subject === currentSubject &&
                        q.chapter === currentChapter &&
                        q.language === currentLanguage &&
                        q.class === currentUser.class
                    );
                    
                    if (filteredQuestions.length > 0) {
                        currentQuestions = filteredQuestions.sort(() => Math.random() - 0.5).slice(0, 10);
                        currentQuestionIndex = 0;
                        score = { correct: 0, wrong: 0 };
                        displayQuestion();
                    } else {
                        alert(translations[appLanguage].noQuestionsAvailable);
                        showScreen('languageScreen');
                    }
                })
                .catch(error => {
                    console.error('Error loading questions:', error);
                    alert(translations[appLanguage].errorLoadingQuestions);
                    showScreen('languageScreen');
                });
        }

        function startTimer(duration) {
            let timeLeft = duration;
            const timerEl = document.getElementById('timer');
            const timerContainer = document.getElementById('timerContainer');
            timerEl.textContent = timeLeft;
            timerContainer.classList.remove('warning');

            clearInterval(questionTimer); 

            questionTimer = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 5) {
                    timerContainer.classList.add('warning');
                }
                if (timeLeft <= 0) {
                    clearInterval(questionTimer);
                    handleTimeout();
                }
            }, 1000);
        }

        function handleTimeout() {
            score.wrong++;
            disableOptions();
            setTimeout(() => {
                currentQuestionIndex++;
                displayQuestion();
            }, 1000); 
        }

        function disableOptions() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.disabled = true;
                const question = currentQuestions[currentQuestionIndex];
                if(button.textContent === question.correct) {
                    button.classList.add('correct');
                }
            });
        }


        function displayQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                showResults();
                return;
            }

            const question = currentQuestions[currentQuestionIndex];
            const timerDuration = question.timer || 30; 
            startTimer(timerDuration);

            document.getElementById('questionCounter').textContent = `${currentQuestionIndex + 1}/${currentQuestions.length}`;
            document.getElementById('questionText').textContent = question.question;

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            question.options.forEach((option) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = option;
                optionBtn.onclick = () => checkAnswer(option, question.correct);
                optionsContainer.appendChild(optionBtn);
            });
        }

        function checkAnswer(selectedAnswer, correctAnswer) {
            clearInterval(questionTimer);
            const optionButtons = document.querySelectorAll('.option-btn');
            let selectedButton = null;

            optionButtons.forEach(button => {
                button.disabled = true;
                if (button.textContent === selectedAnswer) {
                    selectedButton = button;
                }
                if (button.textContent === correctAnswer) {
                    button.classList.add('correct');
                }
            });

            if (selectedAnswer === correctAnswer) {
                if(selectedButton) selectedButton.classList.add('correct');
                score.correct++;
            } else {
                if(selectedButton) selectedButton.classList.add('wrong');
                score.wrong++;
            }

            setTimeout(() => {
                currentQuestionIndex++;
                displayQuestion();
            }, 1000);
        }

        function showResults() {
            const totalScore = score.correct;
            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('correctAnswers').textContent = score.correct;
            document.getElementById('wrongAnswers').textContent = score.wrong;
            showScreen('resultScreen');
        }

        function retakeTest() {
            currentQuestionIndex = 0;
            score = { correct: 0, wrong: 0 };
            loadQuestions();
        }

        function goToDashboard() {
            showScreen('dashboardScreen');
        }

        // Menu Functions
        function changeUsername() {
            toggleMenu();
            const newName = prompt(translations[appLanguage].enterNewUsername, currentUser.name);
            if (newName && newName.trim()) {
                currentUser.name = newName.trim();
                localStorage.setItem('dac_userName', currentUser.name);
                updateWelcomeText();
            }
        }

        function showClassSelection() {
            toggleMenu();
            showScreen('classSelectionScreen');
        }

        function selectClass(classValue) {
            if (currentUser.class !== classValue) {
                currentUser.class = classValue;
                localStorage.setItem('dac_userClass', classValue);
                alert(translations[appLanguage].classChanged.replace('{class}', classValue));
                displaySubjects();
                showScreen('dashboardScreen');
            } else {
                alert(translations[appLanguage].alreadyInClass.replace('{class}', classValue));
                showScreen('dashboardScreen');
            }
        }

        function showAppLanguageSelection() {
            toggleMenu();
            showScreen('appLanguageSelectionScreen');
        }

        function changeAppLanguage(language) {
            if (appLanguage !== language) {
                appLanguage = language;
                localStorage.setItem('dac_appLanguage', language);
                updateAppLanguage();
                showScreen('dashboardScreen');
            } else {
                showScreen('dashboardScreen');
            }
        }

        function updateAppLanguage() {
            // Update all text elements with the selected language
            document.getElementById('splashLogo').innerHTML = translations[appLanguage].splashLogo;
            document.getElementById('welcomeTitle').textContent = translations[appLanguage].welcomeTitle;
            document.getElementById('welcomeSubtitle').textContent = translations[appLanguage].welcomeSubtitle;
            document.getElementById('saveContinueBtn').textContent = translations[appLanguage].saveContinueBtn;
            document.getElementById('userName').placeholder = translations[appLanguage].enterName;
            document.getElementById('startTestTitle').textContent = translations[appLanguage].startTestTitle;
            document.getElementById('startTestSubtitle').textContent = translations[appLanguage].startTestSubtitle;
            document.getElementById('chooseChapterTitle').textContent = translations[appLanguage].chooseChapterTitle;
            document.getElementById('chooseChapterSubtitle').textContent = translations[appLanguage].chooseChapterSubtitle;
            document.getElementById('chooseLanguageTitle').textContent = translations[appLanguage].chooseLanguageTitle;
            document.getElementById('chooseLanguageSubtitle').textContent = translations[appLanguage].chooseLanguageSubtitle;
            document.getElementById('hindiBtn').textContent = translations[appLanguage].hindiBtn;
            document.getElementById('englishBtn').textContent = translations[appLanguage].englishBtn;
            document.getElementById('urduBtn').textContent = translations[appLanguage].urduBtn;
            document.getElementById('marks').textContent = translations[appLanguage].marks;
            document.getElementById('scoreLabel').textContent = translations[appLanguage].scoreLabel;
            document.getElementById('testCompletedTitle').textContent = translations[appLanguage].testCompletedTitle;
            document.getElementById('testCompletedSubtitle').textContent = translations[appLanguage].testCompletedSubtitle;
            document.getElementById('correctLabel').textContent = translations[appLanguage].correctLabel;
            document.getElementById('wrongLabel').textContent = translations[appLanguage].wrongLabel;
            document.getElementById('retakeTestBtn').textContent = translations[appLanguage].retakeTestBtn;
            document.getElementById('dashboardBtn').textContent = translations[appLanguage].dashboardBtn;
            document.getElementById('chooseClassTitle').textContent = translations[appLanguage].chooseClassTitle;
            document.getElementById('selectClassTitle').textContent = translations[appLanguage].selectClassTitle;
            document.getElementById('selectClassSubtitle').textContent = translations[appLanguage].selectClassSubtitle;
            document.getElementById('class10Btn').textContent = translations[appLanguage].class10Btn;
            document.getElementById('class12Btn').textContent = translations[appLanguage].class12Btn;
            document.getElementById('appLanguageTitle').textContent = translations[appLanguage].appLanguageTitle;
            document.getElementById('selectAppLanguageTitle').textContent = translations[appLanguage].selectAppLanguageTitle;
            document.getElementById('selectAppLanguageSubtitle').textContent = translations[appLanguage].selectAppLanguageSubtitle;
            document.getElementById('appEnglishBtn').textContent = translations[appLanguage].appEnglishBtn;
            document.getElementById('appHindiBtn').textContent = translations[appLanguage].appHindiBtn;
            document.getElementById('appUrduBtn').textContent = translations[appLanguage].appUrduBtn;
            document.getElementById('changeUsernameMenu').textContent = translations[appLanguage].changeUsernameMenu;
            document.getElementById('chooseClassMenu').textContent = translations[appLanguage].chooseClassMenu;
            document.getElementById('languageSettingsMenu').textContent = translations[appLanguage].languageSettingsMenu;
            document.getElementById('shareAppMenu').textContent = translations[appLanguage].shareAppMenu;
            document.getElementById('aboutAppMenu').textContent = translations[appLanguage].aboutAppMenu;
            document.getElementById('logoutMenu').textContent = translations[appLanguage].logoutMenu;
            
            // Update welcome text if user is logged in
            if (currentUser.name) {
                updateWelcomeText();
            }
            
            // Update subjects if on dashboard
            if (document.getElementById('dashboardScreen').classList.contains('active')) {
                displaySubjects();
            }
        }

        function shareApp() {
            toggleMenu();
            
            // Get the current URL
            const url = window.location.href;
            
            // Check if Web Share API is supported
            if (navigator.share) {
                navigator.share({
                    title: 'Lewish Classes',
                    text: translations[appLanguage].shareAppText,
                    url: url
                })
                .then(() => {
                    console.log('Shared successfully');
                })
                .catch((error) => {
                    console.error('Error sharing:', error);
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const textArea = document.createElement('textarea');
                textArea.value = `${translations[appLanguage].shareAppText}\n${url}`;
                document.body.appendChild(textArea);
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    alert(translations[appLanguage].shareAppText + '\n' + url);
                } catch (err) {
                    alert(translations[appLanguage].shareError);
                }
                
                document.body.removeChild(textArea);
            }
        }

        function languageSettings() {
            toggleMenu();
            showAppLanguageSelection();
        }

        function aboutApp() {
            toggleMenu();
            alert(translations[appLanguage].aboutAppText);
        }

        function logout() {
            if (confirm(translations[appLanguage].confirmLogout)) {
                localStorage.removeItem('dac_userName');
                localStorage.removeItem('dac_userClass');
                currentUser.name = '';
                currentUser.class = '10'; // Reset to default class on logout
                showScreen('setupScreen');
                toggleMenu();
            }
        }
    </script>
</body>
</html>
